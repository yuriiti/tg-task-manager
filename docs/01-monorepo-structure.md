# Монорепозиторий (Turbo)

## Обзор

Проект организован как монорепозиторий с использованием Turbo для управления сборкой и кэшированием. Это позволяет эффективно управлять несколькими приложениями и пакетами в едином репозитории.

## Структура проекта

```
task-manager/
├── apps/
│   ├── api/          # NestJS backend
│   └── web/          # React frontend
├── packages/
│   ├── shared/       # Общие утилиты
│   ├── ui/           # UI компоненты
│   └── types/        # TypeScript типы
├── turbo.json        # Turbo конфигурация
├── package.json      # Root package.json
├── pnpm-workspace.yaml
├── .gitignore
└── README.md
```

## Технологии

- **pnpm** - менеджер пакетов с поддержкой workspaces
- **Turbo** - инструмент для управления сборкой и кэшированием в монорепозитории
- **TypeScript** - для типизации во всех пакетах

## Конфигурация

### pnpm-workspace.yaml

Определяет структуру workspaces - указывает пути к приложениям и пакетам.

### turbo.json

Настраивает pipeline для задач сборки, разработки, линтинга и тестирования. Определяет зависимости между задачами и выходные директории для кэширования.

### Root package.json

Содержит общие скрипты для управления всем монорепозиторием и общие dev-зависимости.

## Приложения (apps)

### apps/api

NestJS backend приложение с модульной архитектурой и DDD принципами.

**Основные зависимости:**
- @nestjs/core
- @nestjs/common
- @nestjs/mongoose
- @nestjs/config
- @nestjs/jwt

### apps/web

React frontend приложение с FSD архитектурой.

**Основные зависимости:**
- react
- react-dom
- @tanstack/react-query
- zustand
- antd
- react-router-dom

## Пакеты (packages)

### packages/shared

Общие утилиты, функции и константы, используемые в обоих приложениях.

**Структура:**
```
packages/shared/
├── src/
│   ├── utils/
│   ├── constants/
│   ├── helpers/
│   └── index.ts
├── package.json
└── tsconfig.json
```

### packages/ui

Переиспользуемые UI компоненты на основе AntDesign.

**Структура:**
```
packages/ui/
├── src/
│   ├── components/
│   └── index.ts
├── package.json
└── tsconfig.json
```

### packages/types

Общие TypeScript типы и интерфейсы для синхронизации между frontend и backend.

**Структура:**
```
packages/types/
├── src/
│   ├── task.types.ts
│   ├── user.types.ts
│   └── index.ts
├── package.json
└── tsconfig.json
```

## Работа с монорепозиторием

### Установка зависимостей

Используется `pnpm install` для установки всех зависимостей во всех приложениях и пакетах.

### Запуск всех приложений в dev режиме

Команда `pnpm dev` запускает все приложения параллельно через Turbo.

### Сборка всех приложений

Команда `pnpm build` собирает все приложения с учетом зависимостей между ними.

### Запуск конкретного приложения

Используется фильтр `--filter` для запуска конкретного приложения или пакета.

### Добавление зависимостей

- В конкретное приложение: используется `--filter` с именем приложения
- В root: используется флаг `-w` для добавления в корневой package.json

## Преимущества монорепозитория

1. **Единая версия зависимостей** - все приложения используют одинаковые версии библиотек
2. **Переиспользование кода** - общие пакеты доступны всем приложениям
3. **Атомарные коммиты** - изменения в нескольких приложениях в одном коммите
4. **Кэширование сборки** - Turbo кэширует результаты сборки для ускорения разработки
5. **Единая система линтинга и тестирования**

## Turbo кэширование

Turbo автоматически кэширует результаты выполнения задач на основе:
- Исходного кода
- Зависимостей
- Конфигурации

Это значительно ускоряет повторные сборки и тестирование.
